{"name":"BPE","tagline":"Business Process Engine","body":"Business Process Engine\r\n=======================\r\n\r\nOverview\r\n--------\r\n\r\nBPE is Synrc Cloud Stack Erlang Application that bring Erlang for for Enterprise.\r\nIt provides infrastructure for Workflow Definitions, Process Orchestration,\r\nRule Based Production Systems and Distributed Storage.\r\n\r\nWorkflow Engine\r\n===============\r\n\r\nWorkflow Engine -- is an Erlang/OTP application which handles process definitions,\r\nprocess instances, and provides very clean API for Workplaces.\r\n\r\nProcess Schema\r\n--------------\r\n\r\nBefore using Process Engine you need to define the set of business process\r\nworkflows of your enterprise. This could be done via Erlang terms or some DSL\r\nthat lately converted to Erlang terms. Internally BPE uses Eralng terms\r\nworkflow definition:\r\n\r\n```erlang\r\n#process{name = 'Wire Transfer',\r\n\r\n         stages = [#stage{name = 'Request',\r\n                          roles = [department],\r\n                          transitions = ['Approve'],\r\n                          action = {wt,request,\r\n                                       ['WireTransferReq',\r\n                                        {'Invoice',optional},\r\n                                        {'Voucher',optional}]}},\r\n\r\n                   #stage{name = 'Approve',\r\n                          roles = [disbursement],\r\n                          transitions = ['Request','Process','Payroll'],\r\n                          action = {wt,approve,['Signature']}},\r\n\r\n                   #stage{name = 'Payroll',\r\n                          roles = [payroll],\r\n                          transitions = ['Process'],\r\n                          action = {wt,payroll,['TaxIssue']}},\r\n\r\n                   #stage{name = 'Process',\r\n                          roles = [disbursement],\r\n                          transitions = ['Notify'],\r\n                          action = {wt,process,['WireTransaction']}},\r\n\r\n                   #stage{name = 'Notify',\r\n                          roles = [disbursement],\r\n                          transitions = [],\r\n                          action = {wt,notify,['Log']}}],\r\n         rules = []}\r\n```\r\n\r\nThe worklow definiton uses following persistent workflow model which is stored in KVS:\r\n\r\n```erlang\r\n-record(process,{name,stages,rules}).\r\n-record(stage,{name,role,transitions,action}).\r\n```\r\n\r\nThis workflow defition consists of two parts: the workflow discriptive structure\r\nand the compiled workflow rules in Erlang module wt.\r\n\r\n```erlang\r\n-module(wt). % Wire Transfer module\r\n-export([request,approve,payroll,process,notify]).\r\n```\r\n\r\nInternally the API of process definition looks like:\r\n\r\n```erlang\r\nload(File)\r\nsave(File)\r\ncreate(Process)\r\nadd_stage(Process,Stage)\r\nremove_stage(Process,Stage)\r\ndelete(Process)\r\ndefinitions()\r\n```\r\nProcess Instances\r\n-----------------\r\n\r\nInstantiation of process means creating persistent context of document flow.\r\n\r\n```erlang\r\nstart(Process, Tasks)\r\njoin(Self, Id)\r\namend(Id, Tasks)\r\npush(Id)\r\nfinish(Id)\r\nhistory(Id)\r\ntasks(Id)\r\nlist()\r\n```\r\n\r\nUsing 'tasks' API you fetch current documents attached to the given\r\nprocess at particular stage. Using 'amend' API you could upload or\r\nchange document at current stage. 'push' API move current\r\nstage documents further by workflow.\r\n\r\nLet us see how we could initial 'Wire Transfer' transaction:\r\n\r\n```erlang\r\nbpe:load(\"WireTransfer\"),\r\nId = bpe:start('WireTransfer',[]),\r\n[] = bpe:tasks(Id), % current set is empty\r\nTasks = [ #'WireTranswerReq'{\r\n            beneficiary = #agent{ bank=\"SBININBB380\",\r\n                                  name=\"Namdak Tonpa\",\r\n                                  account=\"305820317\"},\r\n            subsidiary = #agent { bank=\"BKTRUS33\",\r\n                                  name=\"Maxim Sokhatsky\",\r\n                                  account=\"804250223\"}}],\r\n\r\nbpe:amend(Id,Tasks),\r\nbpe:push(Id),\r\n```\r\n\r\nCredits\r\n-------\r\n\r\n* Maxim Sokhatsky\r\n\r\nOM A HUM\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}